(this["webpackJsonpnussinov-rna-visualizer"]=this["webpackJsonpnussinov-rna-visualizer"]||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(4),s=n.n(c),i=n(2),o=n(0);function l(e){return[Math.cos(2*e*Math.PI),Math.sin(2*e*Math.PI)]}var u,h=function(e){var t=Object(a.useRef)(null),n=e.bases,r=e.pairs;return Object(a.useEffect)((function(){t.current&&function(e,t,n){var a=e.getContext("2d");if(null!==a){var r=500,c=Math.floor(r/2.4),s=250,o=250;a.lineWidth=2,a.beginPath(),a.arc(s,o,c,0,2*Math.PI),a.stroke();var u=t.length;a.font="20px Arial";for(var h=0;h<u;h+=1){var d=l(h/u),f=Object(i.a)(d,2),b=f[0],j=f[1];a.beginPath(),a.moveTo(s+b*(c-8),o+j*(c-8)),a.lineTo(s+b*(c+8),o+j*(c+8)),a.stroke();var v=c+20;a.fillText(t[h],s+b*v-7,o+j*v- -7)}var p=a.createLinearGradient(0,0,r,0);p.addColorStop(0,"magenta"),p.addColorStop(.5,"blue"),p.addColorStop(1,"red"),a.strokeStyle=p,a.lineWidth=3;for(var m=0;m<n.length;m+=1){var g=n[m][0]/u,O=n[m][1]/u,x=l(g),A=Object(i.a)(x,2),U=A[0],N=A[1],y=l(O),S=Object(i.a)(y,2),C=S[0],M=S[1];a.beginPath(),a.moveTo(s+U*c,o+N*c),a.lineTo(s+C*c,o+M*c),a.stroke()}}}(t.current,n,r)}),[]),Object(o.jsx)("canvas",{width:"500",height:"500",ref:t})};n(10);function d(e,t,n,a){if(n<a){var r=e[n][a][0];if(r===u.Matched)t.push([n,a]),d(e,t,n+1,a-1);else if(r===u.Left)d(e,t,n,a-1);else if(r===u.Down)d(e,t,n+1,a);else if(r===u.Bifurcate){var c=e[n][a][1];d(e,t,n,c),d(e,t,c+1,a)}else r===u.Unmatched&&d(e,t,n+1,a-1)}}function f(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set(["AU","UA","GC","CG"]),a=e.length,r=Array.from({length:a},(function(){return Array.from({length:a},(function(){return 0}))})),c=Array.from({length:a},(function(){return Array.from({length:a},(function(){return[u.Unmatched,0]}))})),s=0;s<a;s+=1)for(var i=s-t;i>=0;i-=1){var o=r[i+1][s-1],l=[u.Unmatched,0];n.has(e.charAt(i)+e.charAt(s))&&(l=[u.Matched,0],o+=1),r[i+1][s]>o?(l=[u.Down,0],o=r[i+1][s]):r[i][s-1]>o&&(l=[u.Left,0],o=r[i][s-1]);for(var h=i+1;h<s;h+=1)r[i][h]+r[h+1][s]>o&&(l=[u.Bifurcate,h],o=r[i][h]+r[h+1][s]);r[i][s]=o,c[i][s]=l}var f=[];return d(c,f,0,a-1),f}!function(e){e[e.Bifurcate=0]="Bifurcate",e[e.Left=1]="Left",e[e.Down=2]="Down",e[e.Matched=3]="Matched",e[e.Unmatched=4]="Unmatched"}(u||(u={}));var b=function(){var e=r.a.useState(""),t=Object(i.a)(e,2),n=t[0],c=t[1],s=r.a.useState([]),l=Object(i.a)(s,2),u=l[0],d=l[1],b=r.a.useState(),j=Object(i.a)(b,2),v=j[0],p=j[1],m=r.a.useState([]),g=Object(i.a)(m,2),O=g[0],x=g[1],A=r.a.useState(!1),U=Object(i.a)(A,2),N=U[0],y=U[1],S=r.a.useState(""),C=Object(i.a)(S,2),M=C[0],w=C[1];function G(e){var t=function(e){var t=e.split(" "),n=t[t.length-1],a=[];(n=n.toUpperCase()).includes("T")&&n.includes("U")&&a.push("Both DNA bases (T) and RNA bases (U) found in input. Mixed input not expected.");var r=(n=n.replace(/T/g,"U")).replaceAll(/[^GACU]/g,"");if(r.length!==n.length){var c="Characters ignored: ".concat(n.replaceAll(/[GACU]/g,""));a.push(c)}return[r,a]}(e),n=Object(i.a)(t,2),a=n[0],r=n[1];r=r.concat(function(e){if(0===e.length)return[];var t=[];if(e.length%3!==0&&t.push("The RNA sequence is not divisible by 3; the string has an ambiguous protein."),e.length>=3){var n="";"UAA"!==(n=n.concat(e[e.length-3].toString(),e[e.length-2].toString(),e[e.length-1].toString()))&&"UAG"!==n&&"UGA"!==n&&t.push("The RNA sequence does not contain a proper end sequence.")}return t}(a)),x(r),y(e.toUpperCase().includes("T"));var s=f(a,v);d(s),w(function(e,t){for(var n=Array(e).fill("."),a=0;a<t.length;a+=1)n[t[a][0]]="(",n[t[a][1]]=")";return n.join("")}(a.length,s)),c(a)}Object(a.useEffect)((function(){var e="GAUUACAGAUU";d(f(e)),c(e),p(2)}),[]);var T=O.map((function(e){return Object(o.jsx)("div",{className:"alert alert-info",children:e})})),P=N?Object(o.jsx)("span",{className:"h5 badge bg-primary",style:{transform:"scale(0.7)"},children:"DNA\u279eRNA"}):Object(o.jsx)("span",{});return Object(o.jsxs)("div",{className:"container-sm",children:[Object(o.jsx)("h1",{className:"text-center",children:"Nussinov RNA Secondary Structure Visualizer"}),Object(o.jsx)("p",{className:"text-center",children:"by jaa2, Jpn3, and SethWyma"}),Object(o.jsxs)("div",{className:"row g-3",children:[Object(o.jsxs)("div",{className:"col-9",children:[Object(o.jsx)("label",{htmlFor:"bases-input",className:"form-label",children:"Bases of the RNA strand"}),Object(o.jsx)("input",{className:"form-control",id:"bases-input",type:"text",placeholder:"GAUUACAGAUU...",onChange:function(e){G(e.target.value)}})]}),Object(o.jsxs)("div",{className:"col-3",children:[Object(o.jsx)("label",{htmlFor:"bases-input",className:"form-label",children:"Minimum hairpin length"}),Object(o.jsx)("input",{className:"form-control",id:"min-hairpin-input",type:"number",value:v,onChange:function(e){!function(e){var t=Math.min(n.length,Math.max(1,e));p(t),d(f(n,t)),c(n)}(+e.target.value)}})]})]}),Object(o.jsx)("br",{}),Object(o.jsxs)("h3",{children:["Nussinov Plot",P]}),Object(o.jsx)(h,{bases:n,pairs:u},n+v),Object(o.jsx)("br",{}),Object(o.jsx)("h3",{children:"Dot-Parentheses Format"}),Object(o.jsx)("div",{className:"px-2",style:{backgroundColor:"#868e96",color:"#dee2e6",fontFamily:"monospace",borderRadius:"10px",overflowWrap:"anywhere"},children:M}),Object(o.jsx)("br",{}),T]})};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(b,{})}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.3873caa4.chunk.js.map