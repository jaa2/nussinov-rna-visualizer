(this["webpackJsonpnussinov-rna-visualizer"]=this["webpackJsonpnussinov-rna-visualizer"]||[]).push([[0],{102:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(22),c=n.n(i),o=n(2),s=n(0);function u(t){return[Math.cos(2*t*Math.PI),Math.sin(2*t*Math.PI)]}var l=function(t){var e=Object(r.useRef)(null),n=t.bases,a=t.pairs;return Object(r.useEffect)((function(){e.current&&function(t,e,n){var r=t.getContext("2d");if(null!==r){var a=500,i=Math.floor(a/2.4),c=250,s=250;r.lineWidth=2,r.beginPath(),r.arc(c,s,i,0,2*Math.PI),r.stroke();var l=e.length;r.font="20px Arial";for(var h=0;h<l;h+=1){var f=u(h/l),d=Object(o.a)(f,2),v=d[0],g=d[1];r.beginPath(),r.moveTo(c+v*(i-8),s+g*(i-8)),r.lineTo(c+v*(i+8),s+g*(i+8)),r.stroke();var b=i+20;r.fillText(e[h],c+v*b-7,s+g*b- -7)}var j=r.createLinearGradient(0,0,a,0);j.addColorStop(0,"magenta"),j.addColorStop(.5,"blue"),j.addColorStop(1,"red"),r.strokeStyle=j,r.lineWidth=3;for(var p=0;p<n.length;p+=1){var x=n[p][0]/l,m=n[p][1]/l,y=u(x),O=Object(o.a)(y,2),A=O[0],M=O[1],w=u(m),N=Object(o.a)(w,2),U=N[0],C=N[1];r.beginPath(),r.moveTo(c+A*i,s+M*i),r.lineTo(c+U*i,s+C*i),r.stroke()}}}(e.current,n,a)}),[]),Object(s.jsx)("canvas",{width:"500",height:"500",ref:e})},h=n(3),f=function(t,e,n){return Math.min(Math.max(t,e),n)};var d,v=function(t){for(var e=t.bases,n=t.pairs,a=e.length,i=[],c=[],o=new Set,u=0;u<n.length;u+=1){var l={source:+n[u][0],target:+n[u][1],value:1,nussinovPair:!0,inBulge:!1};l.source<a&&l.target<a&&c.push(l),o.add(l.source),o.add(l.target)}for(u=0;u<a;u+=1)u<a-1&&c.push({source:u,target:u+1,value:1,nussinovPair:!1,inBulge:!o.has(u)||!o.has(u+1)}),i.push({id:u});var d=function(t){var e=t.nodes,n=t.links,r=t.bases,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.width,c=void 0===i?800:i,o=a.height,s=void 0===o?600:o,u=a.windowBuffer,l=void 0===u?10:u,d=a.windowBounds,v=void 0===d?800:d,g=a.linkColor,b=void 0===g?"#555":g,j=a.linkOpacity,p=void 0===j?.7:j,x=a.nodeRadiusPixels,m=void 0===x?5:x,y=a.nodeColor,O=void 0===y?"#999":y,A=a.nodeFontSizeEm,M=void 0===A?"0.4em":A;function w(t){return null!==t&&"object"===typeof t?t.valueOf():t}var N=h.g(e,(function(t){return t.id})).map(w),U=h.g(n,(function(t){return t.source})).map(w),C=h.g(n,(function(t){return t.target})).map(w);e=h.g(e,(function(t,e){return{id:N[e]}})),n=h.g(n,(function(t,e){return{source:U[e],target:C[e],nussinovPair:n[e].nussinovPair,inBulge:n[e].inBulge}}));var S=h.e(),k=h.d(n).id((function(t){var e=t.index;return N[e]}));S.strength(-5),k.strength((function(t){return t.nussinovPair?.5:.8})),k.distance((function(t){return t.nussinovPair?25:t.inBulge?15:8}));var P=h.a("svg").attr("width",c).attr("height",s).attr("viewBox",[-c/2,-s/2,c,s]).attr("style","max-width: 100%; height: auto; height: intrinsic;"),B=0,T=h.f(e).force("link",k).force("charge",S).force("center",h.c()).on("tick",(function(){if(0===B)for(var t=0,n=2*Math.PI,r=e.length,a=0;a<e.length;a+=1)e[a].x=r*Math.cos(t),e[a].y=r*Math.sin(t),t+=n/e.length;if(B+=1,G.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),R.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),D.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),F.attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})),e.length>0){for(var i=[e[0].x,e[0].y,e[0].x,e[0].y],c=1;c<e.length;c+=1)i=[Math.min(e[c].x,i[0]),Math.min(e[c].y,i[1]),Math.max(e[c].x,i[2]),Math.max(e[c].y,i[3])];P.attr("viewBox",[f(i[0]-l,-v,v),f(i[1]-l,-v,v),f(i[2]-i[0]+2*l,-v,v),f(i[3]-i[1]+2*l,-v,v)])}})),G=P.append("g").attr("stroke",b).attr("stroke-opacity",p).selectAll("line").data(n).join("line").attr("stroke-dasharray",(function(t){return t.nussinovPair?"1":""})),R=P.selectAll("circle").attr("stroke",O).data(e).enter().append("g"),D=R.append("circle").attr("r",m).call(z(T)),F=R.append("text").style("fill","white").style("font-size",M).attr("text-anchor","middle").attr("dy",M).attr("pointer-events","none").text((function(t){return r[t.id]}));function z(t){return h.b().on("start",(function(e){e.active||t.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y})).on("drag",(function(t){t.subject.fx=t.x,t.subject.fy=t.y})).on("end",(function(e){e.active||t.alphaTarget(0),e.subject.fx=null,e.subject.fy=null}))}return Object.assign(P.node(),{})}({nodes:i,links:c,bases:e}),v=Object(r.useRef)(null);return Object(r.useEffect)((function(){v.current&&v.current.appendChild(d)}),[]),Object(s.jsx)("svg",{width:"1200",height:"1200",ref:v})};n(101);function g(t,e,n,r){if(n<r){var a=t[n][r][0];if(a===d.Matched)e.push([n,r]),g(t,e,n+1,r-1);else if(a===d.Left)g(t,e,n,r-1);else if(a===d.Down)g(t,e,n+1,r);else if(a===d.Bifurcate){var i=t[n][r][1];g(t,e,n,i),g(t,e,i+1,r)}else a===d.Unmatched&&g(t,e,n+1,r-1)}}!function(t){t[t.Bifurcate=0]="Bifurcate",t[t.Left=1]="Left",t[t.Down=2]="Down",t[t.Matched=3]="Matched",t[t.Unmatched=4]="Unmatched"}(d||(d={}));var b=function(){var t=a.a.useState(""),e=Object(o.a)(t,2),n=e[0],i=e[1],c=a.a.useState([]),u=Object(o.a)(c,2),h=u[0],f=u[1],b=a.a.useState(),j=Object(o.a)(b,2),p=j[0],x=j[1],m=a.a.useState([]),y=Object(o.a)(m,2),O=y[0],A=y[1],M=a.a.useState(!1),w=Object(o.a)(M,2),N=w[0],U=w[1],C=a.a.useState(""),S=Object(o.a)(C,2),k=S[0],P=S[1];function B(t){var e=function(t){var e=t.split(" "),n=e[e.length-1],r=[];(n=n.toUpperCase()).includes("T")&&n.includes("U")&&r.push("Both DNA bases (T) and RNA bases (U) found in input. Mixed input not expected.");var a=(n=n.replace(/T/g,"U")).replaceAll(/[^GACU]/g,"");if(a.length!==n.length){var i="Characters ignored: ".concat(n.replaceAll(/[GACU]/g,""));r.push(i)}return[a,r]}(t),n=Object(o.a)(e,2),r=n[0],a=n[1];a=a.concat(function(t){if(0===t.length)return[];var e=[];if(t.length%3!==0&&e.push("The RNA sequence is not divisible by 3; the string has an ambiguous protein."),t.length>=3){var n="";"UAA"!==(n=n.concat(t[t.length-3].toString(),t[t.length-2].toString(),t[t.length-1].toString()))&&"UAG"!==n&&"UGA"!==n&&e.push("The RNA sequence does not contain a proper end sequence.")}return e}(r)),A(a),U(t.toUpperCase().includes("T"));var c=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set(["AU","UA","GC","CG"]),r=t.length,a=Array.from({length:r},(function(){return Array.from({length:r},(function(){return 0}))})),i=Array.from({length:r},(function(){return Array.from({length:r},(function(){return[d.Unmatched,0]}))})),c=0;c<r;c+=1)for(var o=c-e;o>=0;o-=1){var s=a[o+1][c-1],u=[d.Unmatched,0];n.has(t.charAt(o)+t.charAt(c))&&(u=[d.Matched,0],s+=1),a[o+1][c]>s?(u=[d.Down,0],s=a[o+1][c]):a[o][c-1]>s&&(u=[d.Left,0],s=a[o][c-1]);for(var l=o+1;l<c;l+=1)a[o][l]+a[l+1][c]>s&&(u=[d.Bifurcate,l],s=a[o][l]+a[l+1][c]);a[o][c]=s,i[o][c]=u}var h=[];return g(i,h,0,r-1),h}(r,p);f(c),P(function(t,e){for(var n=Array(t).fill("."),r=0;r<e.length;r+=1)n[e[r][0]]="(",n[e[r][1]]=")";return n.join("")}(r.length,c)),i(r)}Object(r.useEffect)((function(){x(2),B("GAUUACAGAUAA")}),[]);var T=O.map((function(t){return Object(s.jsx)("div",{className:"alert alert-info",children:t})})),G=N?Object(s.jsx)("span",{className:"h5 badge bg-primary",style:{transform:"scale(0.7)"},children:"DNA\u279eRNA"}):Object(s.jsx)("span",{});return Object(s.jsxs)("div",{className:"container-sm",children:[Object(s.jsx)("h1",{className:"text-center",children:"Nussinov RNA Secondary Structure Visualizer"}),Object(s.jsx)("p",{className:"text-center",children:"by jaa2, Jpn3, and SethWyma"}),Object(s.jsxs)("div",{className:"row g-3",children:[Object(s.jsxs)("div",{className:"col-9",children:[Object(s.jsx)("label",{htmlFor:"bases-input",className:"form-label",children:"Bases of the RNA strand"}),Object(s.jsx)("input",{className:"form-control",id:"bases-input",type:"text",placeholder:"GAUUACAGAUAA...",onChange:function(t){B(t.target.value)}})]}),Object(s.jsxs)("div",{className:"col-3",children:[Object(s.jsx)("label",{htmlFor:"bases-input",className:"form-label",children:"Minimum hairpin length"}),Object(s.jsx)("input",{className:"form-control",id:"min-hairpin-input",type:"number",value:p,onChange:function(t){!function(t){var e=Math.min(n.length,Math.max(1,t));x(e),B(n)}(+t.target.value)}})]})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("h3",{children:["Nussinov Plot",G]}),Object(s.jsx)(l,{bases:n,pairs:h},"C".concat(n,"_").concat(p)),Object(s.jsx)(v,{bases:n,pairs:h},"F".concat(n,"_").concat(p)),Object(s.jsx)("br",{}),Object(s.jsx)("h3",{children:"Dot-Parentheses Format"}),Object(s.jsx)("div",{className:"px-2",style:{backgroundColor:"#868e96",color:"#dee2e6",fontFamily:"monospace",borderRadius:"10px",overflowWrap:"anywhere"},children:k}),Object(s.jsx)("br",{}),T]})};c.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(b,{})}),document.getElementById("root"))}},[[102,1,2]]]);
//# sourceMappingURL=main.10a5e182.chunk.js.map